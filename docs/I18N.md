# Sistema de Internacionalizaci√≥n (i18n) con Wrapper Personalizado

Este proyecto utiliza un **wrapper personalizado** sobre `@jsverse/transloco` para gestionar las traducciones. El wrapper permite:

- üîÑ **F√°cil cambio de librer√≠a** de traducciones en el futuro
- üéØ **Interface consistente** en toda la aplicaci√≥n
- üõ°Ô∏è **Type safety** con constantes tipadas
- üéÆ **API simplificada** y centralizada

## Arquitectura del Wrapper

```
src/app/core/i18n/
‚îú‚îÄ‚îÄ index.ts                    # Barrel exports
‚îú‚îÄ‚îÄ i18n.types.ts              # Tipos e interfaces
‚îú‚îÄ‚îÄ i18n.service.ts            # Servicio principal wrapper
‚îú‚îÄ‚îÄ i18n.directive.ts          # Directiva personalizada
‚îú‚îÄ‚îÄ i18n.pipe.ts               # Pipe personalizado
‚îú‚îÄ‚îÄ i18n-config.provider.ts    # Configuraci√≥n centralizada
‚îî‚îÄ‚îÄ transloco-loader.ts        # Loaders internos
```

## Configuraci√≥n Inicial

### 1. App Configuration

```typescript
// src/app/app.config.ts
import { provideI18n } from '@app/core/i18n';

export const appConfig: ApplicationConfig = {
  providers: [
    // ... otros providers
    provideI18n({
      defaultLang: 'en',
      fallbackLang: 'en',
      availableLangs: ['en', 'es'],
    }),
  ],
};
```

## Uso en Componentes

### 1. Con Directiva Personalizada (Recomendado)

```typescript
import { I18nDirective } from '@app/core/i18n';

@Component({
  imports: [I18nDirective],
  providers: [provideTranslocoScope('auth')], // Para scopes
})
export class MyComponent {}
```

```html
<!-- Con scope -->
<ng-container *i18n="'auth'; let t">
  <h1>{{ t('login.title') }}</h1>
  <p>{{ t('login.subtitle') }}</p>
</ng-container>

<!-- Sin scope (global) -->
<ng-container *i18n="let t">
  <button>{{ t('common.actions.save') }}</button>
</ng-container>
```

### 2. Con Pipe Personalizado

```typescript
import { I18nPipe } from '@app/core/i18n';

@Component({
  imports: [I18nPipe],
})
export class MyComponent {}
```

```html
<!-- Uso b√°sico -->
<h1>{{ 'common.actions.save' | i18n }}</h1>

<!-- Con par√°metros -->
<p>{{ 'common.validation.min_length' | i18n : { min: 8 } }}</p>

<!-- Con scope -->
<h1>{{ 'login.title' | i18n : {} : 'auth' }}</h1>
```

### 3. Con Servicio Directo

```typescript
import { I18nService, COMMON_KEYS, AUTH_KEYS } from '@app/core/i18n';

export class MyComponent {
  constructor(private i18n: I18nService) {}

  someMethod() {
    // Traducci√≥n directa
    const message = this.i18n.translate(COMMON_KEYS.ACTIONS.SAVE);

    // Con par√°metros
    const validation = this.i18n.translate(COMMON_KEYS.VALIDATION.MIN_LENGTH, { min: 8 });

    // Con scope
    const title = this.i18n.translate('login.title', {}, 'auth');

    // M√∫ltiples traducciones
    const translations = this.i18n.translateMultiple([
      COMMON_KEYS.ACTIONS.SAVE,
      COMMON_KEYS.ACTIONS.CANCEL,
    ]);
  }
}
```

## Constantes Tipadas

El wrapper incluye constantes tipadas para mayor type safety:

```typescript
import { COMMON_KEYS, AUTH_KEYS } from '@app/core/i18n';

// En lugar de strings m√°gicos
const message = this.i18n.translate('common.actions.save');

// Usa constantes tipadas
const message = this.i18n.translate(COMMON_KEYS.ACTIONS.SAVE);
```

## Selector de Idioma

```typescript
import { LanguageSelectorComponent } from '@app/shared/components/language-selector/language-selector.component';

@Component({
  imports: [LanguageSelectorComponent],
})
```

```html
<language-selector></language-selector>
```

## API del I18nService

### Propiedades

- `currentLanguage: string` - Idioma actual
- `currentLanguageInfo: Language` - Informaci√≥n completa del idioma actual
- `availableLanguages: Language[]` - Idiomas disponibles
- `langChanges$: Observable<string>` - Observable de cambios de idioma
- `isReady: boolean` - Si el sistema est√° listo

### M√©todos

- `setLanguage(langCode: string): void` - Cambiar idioma
- `translate(key: string, params?, scope?): string` - Traducir (s√≠ncrono)
- `translate$(key: string, params?, scope?): Observable<string>` - Traducir (as√≠ncrono)
- `hasKey(key: string, scope?): boolean` - Verificar si existe una clave
- `translateMultiple(keys: string[], scope?): Record<string, string>` - M√∫ltiples traducciones
- `loadScope(scope: string): Observable<any>` - Cargar scope din√°micamente

## Ventajas del Wrapper

### üîÑ **Desacoplamiento**

Si necesitas cambiar de Transloco a otra librer√≠a (como ngx-translate, i18next, etc.), solo necesitas actualizar la implementaci√≥n interna del wrapper.

### üéØ **API Consistente**

Toda la aplicaci√≥n usa la misma interfaz, independientemente de la librer√≠a subyacente.

### üõ°Ô∏è **Type Safety**

Las constantes tipadas previenen errores de escritura en las claves de traducci√≥n.

### üì¶ **Funcionalidad Extendida**

El wrapper puede a√±adir funcionalidades adicionales como cache, logging, etc.

### üéÆ **Simplicidad**

API m√°s simple y directa que la original de Transloco.

## Migraci√≥n Futura

Para cambiar a otra librer√≠a de traducciones:

1. Actualizar `i18n-config.provider.ts`
2. Actualizar `i18n.service.ts` implementation
3. Actualizar loaders si es necesario
4. **NO necesitas** cambiar ning√∫n componente

## Archivos del Wrapper

- `src/app/core/i18n/` - Todo el c√≥digo del wrapper
- `src/app/app.config.ts` - Configuraci√≥n usando `provideI18n()`
- Componentes - Usando `I18nDirective`, `I18nPipe`, `I18nService`
